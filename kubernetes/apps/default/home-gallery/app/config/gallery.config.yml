# yaml-language-server: $schema=https://raw.githubusercontent.com/xemle/home-gallery/master/gallery.config.schema.json
#
# HomeGallery configuration file
#
# For docker containers:
# - /data is the main data volume
# - Config files are stored in /data/config
# - Storage (previews, metadata) in /data/storage
#

# Base directory for docker
baseDir: '/data'
configDir: '{baseDir}/config'
cacheDir: '{baseDir}'

# Media sources - mounted via NFS
sources:
  - dir: '/data/Pictures'
    # Exclude common unwanted files
    excludes:
      - .DS_Store
      - ._*
      - '*.tmp'
      - Thumbs.db
    # Skip directory if this file is present
    excludeIfPresent: .galleryignore
    # Allow original files to be downloaded
    downloadable: true
    # Use size-ctime matcher for NFS (size-ctime-inode doesn't work reliably on network shares)
    matcher: size-ctime

# Extractor settings
extractor:
  # Preview image settings - only essential sizes (1920 for full view, 320 for list, 128 for grid)
  image:
    previewSizes: [1920, 320, 128]
    previewQuality: 80
  # Video settings (only poster/frame extraction, no transcoding)
  video:
    previewSize: 720
    ext: mp4
  # Geo reverse lookup for map view (uses OpenStreetMap Nominatim)
  geoReverse:
    url: https://nominatim.openstreetmap.org
    addressLanguage: [hu, en]
  # Disable AI features (no API server)
  apiServer:
    disable:
      - similarDetection
      - objectDetection
      - faceDetection

# Storage configuration
storage:
  dir: '{cacheDir}/storage'

# Database configuration
database:
  file: '{configDir}/database.db'
  # Memory limit for database operations (MB) - higher during import, drops after
  maxMemory: 2048

# Events database
events:
  file: '{configDir}/events.db'

# Server configuration
server:
  port: 3000
  host: '0.0.0.0'
  # Don't open browser in container
  openBrowser: false
  # Import sources on server start
  importSources: true
  # Watch sources for changes
  watchSources: true

# Webapp configuration
webapp:
  title: 'Fénykép galéria'
  # Disable webapp features
  disabled:
    - edit
    - events
  # Disable pages/features in media view
  pages:
    disabled:
      - edit
      - tag
    mediaView:
      disabled:
        - similar
        - annotation
        - edit
        - tag
  # Hungarian date format
  format:
    date: "%Y.%m.%d"
    monthYear: "%Y %b"
    time: "%H:%M:%S"
    hourMinute: "%H:%M"

# Logger configuration
logger:
  - type: console
    level: info
