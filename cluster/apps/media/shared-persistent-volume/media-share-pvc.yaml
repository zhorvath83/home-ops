# ---
# apiVersion: v1
# kind: PersistentVolume
# metadata:
#   name: media-share
# spec:
#   storageClassName: media-share-storage
#   accessModes:
#     - ReadWriteMany
#   capacity:
#     storage: 1Mi
#   persistentVolumeReclaimPolicy: Retain
#   hostPath:
#     path: /mnt/media
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: media-share
spec:
  storageClassName: media-share-storage
  capacity:
    storage: 1Mi # Size does not matter
  accessModes: ["ReadWriteMany"]
  persistentVolumeReclaimPolicy: Retain
  nfs:
    server: ${CLUSTER_LAN_NAS_IP}
    path: /media
  # Note: The first two options are strictly for NFSv4.2
  mountOptions: ["nfsvers=4.2", "nconnect=8", "hard", "noatime"]
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: media-share
  namespace: media
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: media-share-storage
  resources:
    requests:
      storage: 1Mi
