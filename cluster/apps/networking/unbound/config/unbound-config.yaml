---
apiVersion: v1
kind: ConfigMap
metadata:
  name: unbound-config
  namespace: networking
data:
  unbound.conf: |
    server:
      verbosity: 1

      statistics-interval: 600
      statistics-cumulative: yes

      interface: 0.0.0.0
      port: 5053
      do-ip4: yes
      do-ip6: no
      do-udp: yes
      do-tcp: yes

      do-daemonize: no

      prefer-ip6: no

      access-control: 10.0.0.0/8 allow
      access-control: 127.0.0.0/8 allow
      access-control: 172.16.0.0/12 allow
      access-control: 192.168.0.0/16 allow

      private-address: 10.0.0.0/8
      private-address: 169.254.0.0/16
      private-address: 172.16.0.0/12
      private-address: 192.168.0.0/16

      # Perform prefetching of close to expired message cache entries
      # This only applies to domains that have been frequently queried
      prefetch: yes

      directory: "/etc/unbound"
      logfile: ""
      pidfile: "/var/run/unbound/unbound.pid"

      identity: "docker-unbound"
      auto-trust-anchor-file: "/var/run/unbound/root.key"

      include: "/config/*.conf"
